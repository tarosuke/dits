## チケットID(TID)

UUIDの128bitsをアルファベットの大文字小文字+数字の62文字へUUIDを62進数へ変換して文字を割り当てることでエンコードする。これはチケットファイル名とブランチ名として使われる。

おい、そこのお前、**大文字小文字数字混じり23文字のチケットIDを口頭で**伝える進捗報告会なんてしようと思うなよ？そういうのはチケット上でやれ。

## .dits

チケットファイルが入っているディレクトリ。チケットへの書き込み操作時に存在しなければ作られる。

## チケットファイル

チケットファイルはファイル名がTIDになっている。各チケットの情報が格納されている。チケットファイルは操作を追記していくジャーナル形式になっていてコンフリクトの自動解決を可能にしている。あるいは追記同士はコンフリクトしないのかもしれないが実際に試してみないことにはなんとも言えない。

## チケットの親子関係

子チケットを持つチケットをノードチケット、子チケットを持たないチケットをリーフチケットと呼ぶ。

## チケットの状態

* New
新規。ブランチとチケットファイルが用意されているが担当者が設定されていない。チケット作成時にはまず子ブランチが作成され、ついでその中に子チケットが格納されpushされる(これは必ず成功する)。その後親チケットに子チケットの情報が追記され、commit、pushされる。もしpushが失敗した場合、rebaseでpullした後にpushし直す。コンフリクトが発生した場合は両方の修正が有効になっているべきなのでコンフリクトマーカーを削除してcommit、pushする。
* Open
執行中。担当者が設定されている状態。この状態に移行する時にはチケットにOpenメッセージか追記される。Openメッセージが複数ある場合は先頭が有効。pushに失敗した場合、```-Xtheirs```が指定されてpullされるので競合に負けた側の修正は取り消される。
* Closed
終了。完了であればチケットにCloseが追記されて親ブランチへ移動、マージが試みられる。

なお、自動解決できないコードのコンフリクトを排除するため、コンフリクトし得ないリーフチケットを除いてチケットの操作はワーキングツリーがcleanかつHEADがトラック先と同じである必要がある。

## チケットのメッセージ

メッセージは基本的にシングルライン。

### 操作

最後のものが現在の状態となる。

* Open
チケットをOpen状態にする。データは担当者。最初のものが有効。
* Close
チケットをClosedにする。
* ChaneOwner
担当者を変更する。データは新しい担当者。最後のものが有効。

### 設定

* Comment
コメントを追加する。データはコメントで改行はタグに変換される。複数ある場合すべて有効。
* Parent
データは親チケットのTID。最後のものが有効。
* Child
データは子チケットのTID。複数ある場合はすべて有効。UnChildとの競合は最後が有効。
* UnChild
子チケットだったチケットのTID。Childとの競合は最後が有効。